import * as PIXI from "pixi.js";
import Spritesheet from "../package/package.spritesheet";
import Grid from './grid';


export const world_scene = new PIXI.Container();

export const world = new Spritesheet()
    .setPath("static/world.png")
    .setSize(160, 160)
    .setSheetSize(800, 960)
    .build("0:29");

export const CODE = {
    "air": { sprite: world[29], code: 0 },
    "dirt_floor": { sprite: world[0], code: 1 },
    "block_floor": { sprite: world[1], code: 2 },
    "brick": { sprite: world[3], code: 3 },
    "lucky_block_on": { sprite: world[4], code: 4 },
    "lucky_block_off": { sprite: world[2], code: 5 },
    "pipe_top_left": { sprite: world[5], code: 10 },
    "pipe_top_right": { sprite: world[6], code: 11 },
    "pipe_bottom_left": { sprite: world[9], code: 12 },
    "pipe_bottom_right": { sprite: world[10], code: 13 },
    "herb_left": { sprite: world[21], code: 20 },
    "herb_middle": { sprite: world[22], code: 21 },
    "herb_right": { sprite: world[23], code: 22 },
    "cloud_left": { sprite: world[11], code: 30 },
    "cloud_middle": { sprite: world[12], code: 31 },
    "cloud_right": { sprite: world[13], code: 32 },
    "cloud_bottom_left": { sprite: world[14], code: 33 },
    "cloud_bottom_middle": { sprite: world[15], code: 34 },
    "cloud_bottom_right": { sprite: world[16], code: 35 },
};


const codeGrid = {};
Object.keys(CODE).forEach(key => {
    const { sprite, code } = CODE[key];
    codeGrid[code] = sprite;
});


let _ = 0;

export const map = new Grid()
    .setMapSize(208, 15)
    .setMapStruct([
        _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,
        _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,
        _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,
        _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,
        _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,
        _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _,30,31,32, _, _, _, _, _, _, _, _,30,31,31,  31,32, _, _, _, _, _,30,31,31,32, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _,30,31,32, _, _, _,   _, _, _,30,31,32, _, _, _, _, _, _,30,31,31,31,  32, 3, 3, 3, 3, 3, 3, 3, 3, _, _, _, 3, 3, 3, 4,   _, _, _, _, _, _, _, _, _, _,30,31,32, _, 4, _,   _, _, _, _, _,30,31,32, _, 3, 3, 3, _, _, _, _,   3, 4, 4, 3, _,30,31,32, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _,30,31,32, _, _, _, _, _, _,   _, _, _, _,30,31,32, _, _, _, _,30,31,31,31,32,   _, _, _, _, _,30,31,32, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 
        _, _, _, _, _, _, _, _, _, _,30,31,32, _, _, _,   _, _,33,34,35, _, _, 4, _, _, _, _, _,33,34,34,  34,35, _, _, _, _, _,33,34,34,35, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _,33,34,35, _, _, _,   _, _, _,33,34,35, _, _, _, _, _, _,33,34,34,34,  35, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _,33,34,35, _, _, _,   _, _, _, _, _,33,34,35, _, _, _, _, _, _, _, _,   _, _, _, _, _,33,34,35, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _,33,34,35, _, _, _, _, _, _,   _, _, _, _,33,34,35, _, _, _, _,33,34,34,34,35,   _, _, _, _, _,33,34,35, _, _, 2, 2, _, _, _, _,   _, _, _, _, _, _, _, _, _,30,31,32, _, _, _, _, 
        _, _, _, _, _, _, _, _, _, _,33,34,35, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, 2, 2, 2, _, _, _, _,   _, _, _, _, _, _, _, _, _,33,34,35, _, _, _, _, 
        _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, 2, 2, 2, 2, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 
        _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, 4, _, _, _, 3, 4, 3, 4, 3, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,10,  11, _, _, _, _, _, _, _, _, _,10,11, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, 3, 4,   3, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 3,   _, _, _, _, _, 3, 3, _, _, _, _, 4, _, _, 4, _,   4, _, _, _, _, _, 3, _, _, _, _, _, _, _, _, _,   _, 3, 3, _, _, _, _, _, _, 2, _, _, 2, _, _, _,   _, _, _, _, _, _, _, 2, _, _, 2, _, _, _, _, _,   _, _, _, _, _, _, _, 3, 3, 4, 3, _, _, _, _, _,   _, _, _, _, _, _, _, 2, 2, 2, 2, 2, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 
        _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _,10,11, _, _, _, _, _, _,12,  13, _, _, _, _, _, _, _, _, _,12,13, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, 2, 2, _, _, 2, 2, _, _,   _, _, _, _, _, _, 2, 2, _, _, 2, 2, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, 2, 2, 2, 2, 2, 2, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 
        _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _,10,11, _,   _, _, _, _, _, _, _,12,13, _, _, _, _, _, _,12,  13, _, _, _, _, _, _, _, _, _,12,13, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, _, 2, 2, 2, _, _, 2, 2, 2, _,   _, _, _, _, _, 2, 2, 2, _, _, 2, 2, 2, _, _, _,   _, _,10,11, _, _, _, _, _, _, _, _, _, _, _, _,   _, _,10,11, _, 2, 2, 2, 2, 2, 2, 2, _, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 
        _, _, _, _, _, _, _, _, _, _, _,20,21,21,21,22,   _, _, _, _, _, _, _, _,20,21,22, _, _,12,13, _,   _, _, _, _, _, _, _,12,13,20,21,22, _, _, _,12,  13, _, _, _, _, _, _, _, _, _,12,13,20,21,21,21,  22, _, _, _, _, _, _, _,20,21,22, _, _, _, _, _,   _, _, _, _, _, _, _, _, _, _,20,21,22, _, _, _,   _, _, _, _, _, _, _, _, _, _, _, _,20,21,21,21,  22, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _,   _, _, _, _, _, _, 2, 2, 2, 2,21,21, 2, 2, 2, 2,   _, _, _, _, 2, 2, 2, 2, _, _, 2, 2, 2, 2,22, _,   _, _,12,13, _,20,21,22, _, _, _, _, _, _, _, _,   _, _,12,13, 2, 2, 2, 2, 2, 2, 2, 2, _, _, _, _,   _, _, _, _, _, 2, _, _, _, _, _, _, _, _, _, _, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, _, _, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, _, _, _, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, _, _, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, _, _, _, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,   1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    ])
    .setCode(codeGrid)
    .setUniqueTileProperty(4, {
        tint: 0xFFFF00
    })
    .setMapScale(0.30)
    .setMapPosition(0, -120)
    .setIgnoreCode(0)
    .build(world_scene)

